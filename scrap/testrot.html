<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
	<head>
		<title>TODO supply a title</title>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width">
	</head>
	<body>
		<table id="Piece"></table>
		<script type="text/javascript">
			var grid = [];
			var table = document.getElementById('Piece');
			var size = 4;
			for (y = 0; y < size; y++) {
				var tr = document.createElement('tr');
				table.appendChild(tr);
				grid.push([]);
				for (x = 0; x < size; x++) {
					var td = document.createElement('td');
					tr.appendChild(td);
					td.innerHTML = (y * size) + x + 1;
					grid[y].push(td);
				}
			}


			// 0,0 1,0 2,0 3,0
			// 0,1 1,1 2,1 3,1
			// 0,2 1,2 2,2 3,2
			// 0,3 1,3 2,3 3,3

			function rotleft() {
				var start = 0;
				var end = size - 1;
				var cursize = end-start;
				while (start < end) {
					for (x = 0; x < cursize; x++) {
						var x1 = x + start;
						var x2 = end - x;
						var aux = grid[x1][start].innerHTML;

						grid[x1][start].innerHTML = grid[end][x1].innerHTML;
						grid[end][x1].innerHTML = grid[x2][end].innerHTML;
						grid[x2][end].innerHTML = grid[start][x2].innerHTML;
						grid[start][x2].innerHTML = aux;
					}
					start++;
					end--;
					cursize = end-start;
				}
			}

			function rotright() {
				var start = 0;
				var end = size - 1;
				var cursize = end-start;
				while (start < end) {
					for (x = 0; x < cursize; x++) {
						var x1 = x + start;
						var x2 = end - x;
						var aux = grid[x1][start].innerHTML;

						grid[x1][start].innerHTML = grid[start][x2].innerHTML;//1
						grid[start][x2].innerHTML = grid[x2][end].innerHTML;//4
						grid[x2][end].innerHTML = grid[end][x1].innerHTML;//3
						grid[end][x1].innerHTML = aux;//2
					}
					start++;
					end--;
					cursize = end-start;
				}
			}

			function rot180() {
				var lastIdx = size - 1;
				var midIdx, lastLine;
				if (lastIdx % 2) {
					midIdx = -1;
					lastLine = (size / 2) - 1;
				}
				else {
					midIdx = lastIdx / 2;
					lastLine = lastIdx / 2;
				}

				for (y = 0; y <= lastLine; y++) {
					var y2 = lastIdx - y;
					for (x = 0; x < size; x++) {
						if (x === y && x === midIdx) {
							break;
						}
						console.log('x' + x + ' y' + y);
						var x2 = lastIdx - x;
						var aux = grid[x][y].innerHTML;
						grid[x][y].innerHTML = grid[x2][y2].innerHTML;
						grid[x2][y2].innerHTML = aux;
					}
				}
			}

		</script>
		<button onclick="rotleft()">&lt;</button>
		<button onclick="rot180()">V</button>
		<button onclick="rotright()">&gt;</button>
	</body>
</html>
